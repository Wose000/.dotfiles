#!/bin/env bash

BACKLIGHT_PATH="/sys/class/backlight/intel_backlight"

if [ ! -d $BACKLIGHT_PATH ]; then
	exit 1
fi

MAX_BRIGHTNESS_FILE="/sys/class/backlight/intel_backlight/max_brightness"
BRIGHTNESS_FILE="/sys/class/backlight/intel_backlight/brightness"

CURRENT_BRIGHTNESS=$(cat $BRIGHTNESS_FILE)
MAX_BRIGHTNESS=$(cat $MAX_BRIGHTNESS_FILE)

STEP=100

case "$1" in
	"up")
		NEW_BRIGHTNESS=$(($CURRENT_BRIGHTNESS + $STEP))
		if [ "$NEW_BRIGHTNESS" -gt "$MAX_BRIGHTNESS" ]; then
			NEW_BRIGHTNESS="$MAX_BRIGHTNESS"
		fi
		;;
	"down")
		NEW_BRIGHTNESS=$(($CURRENT_BRIGHTNESS - $STEP))
		if [ "$NEW_BRIGHTNESS" -lt 0 ]; then
			NEW_BRIGHTNESS=0
		fi
		;;
	*)
		exit 1
		;;
esac

echo "$NEW_BRIGHTNESS" > "$BRIGHTNESS_FILE"



